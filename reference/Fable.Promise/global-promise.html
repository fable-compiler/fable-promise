<html class="has-navbar-fixed-top" lang="en"><head><title>Fable.Promise</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/fable-promise/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://fable.io/fable-promise/">Fable.Promise</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-hidden-mobile" href="/fable-promise/documentation/getting-started.html">Documentation</a><a class="navbar-item is-active is-hidden-mobile" href="/fable-promise/reference/Fable.Promise/index.html">API</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/fable-compiler/fable-promise"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item" href="https://twitter.com/FableCompiler"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="/fable-promise/documentation/getting-started.html">Documentation</a><a class="nacara-navbar-menu-item" href="/fable-promise/reference/Fable.Promise/index.html">API</a><a class="nacara-navbar-menu-item" href="https://github.com/fable-compiler/fable-promise">Github</a><a class="nacara-navbar-menu-item" href="https://twitter.com/FableCompiler">Twitter</a></div></div></nav><div class="grey-overlay"></div><div class="nacara-content"><div class="container"><div class="columns"><div class="column is-10-desktop is-offset-1-desktop"><section class="section"><div class="content"><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtki{font-style:italic}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk5{color:#e45649}.atom-one-light .mtk4{color:#c18401}.atom-one-light .mtk6{color:#986801}.atom-one-light .mtk7{color:#a0a1a7}.atom-one-light .mtk10{color:#50a14f}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><div class=is-size-3>Promise</div><p><div><strong>Namespace:</strong> <a href=/fable-promise/reference/Fable.Promise/global.html>global</a></div><p><p class=is-size-5><strong>Declared types</strong><p><table class="docs-types is-bordered table"><thead><tr><th width=25%>Type<th width=75%>Description<tbody><tr><td><a href=/fable-promise/reference/Fable.Promise/promise-promisebuilder.html>PromiseBuilder</a><td><p>A builder to provide promise Computation Expression support.<p>The CE is available via <code>promise { ... }</code><div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=0 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>double</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>value </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>int</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> value </span><span class=mtk14>*</span><span class=mtk1> </span><span class=mtk6>2</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span></code></pre></div></table><p><p class=is-size-5><strong>Values and functions</strong><hr><div class=api-code><div><span class=keyword>val</span> <a href=#create id=create>create</a> <span class=keyword>:</span></div><div>    f      <span class=keyword>:</span> <span class=keyword>(</span>'T <span class=keyword>-></span> unit<span class=keyword>)</span> <span class=keyword>-></span> <span class=keyword>(</span>exn <span class=keyword>-></span> unit<span class=keyword>)</span> <span class=keyword>-></span> unit </div><div>           <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>Create a promise from a function<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=1 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>write</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>path</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>string</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>content</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>string</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        Node.Api.fs.writeFile</span><span class=mtk14>(</span><span class=mtk1>path</span><span class=mtk14>,</span><span class=mtk1> content</span><span class=mtk14>,</span><span class=mtk1> </span><span class=mtk14>(fun</span><span class=mtk1> res </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>match</span><span class=mtk1> res </span><span class=mtk14>with</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>|</span><span class=mtk1> Some res </span><span class=mtk14>-></span><span class=mtk1> reject </span><span class=mtk14>(</span><span class=mtk1>res </span><span class=mtk14>:?></span><span class=mtk1> System.Exception</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>|</span><span class=mtk1> None </span><span class=mtk14>-></span><span class=mtk1> resolve </span><span class=mtk14>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>))</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>f</span> <span class=keyword>:</span> <span class=keyword>(</span>'T <span class=keyword>-></span> unit<span class=keyword>)</span> <span class=keyword>-></span> <span class=keyword>(</span>exn <span class=keyword>-></span> unit<span class=keyword>)</span> <span class=keyword>-></span> unit</div><p>Function used to create the promise, it receives two other function parameters:<ul><li><code>success</code> : called when the promise is resolved<li><code>fail</code> : called when the promise is rejected</ul></div><p><strong>Returns</strong><p>The promise created by the function<hr><div class=api-code><div><span class=keyword>val</span> <a href=#sleep id=sleep>sleep</a> <span class=keyword>:</span></div><div>    ms    <span class=keyword>:</span> int </div><div>          <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>unit<span class=keyword>></span></span></div></div><p>Create a promise which wait <code>X</code> ms before resolving.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=2 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Do something</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>doSomething </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Sleep for 1 second</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.sleep </span><span class=mtk6>1000</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Do another thing</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> _ </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    doAnotherThing </span><span class=mtk14>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>ms</span> <span class=keyword>:</span> int</div>Number of milliseconds to wait</div><p><strong>Returns</strong><p>A delayed promise<hr><div class=api-code><div><span class=keyword>val</span> <a href=#lift id=lift>lift</a> <span class=keyword>:</span></div><div>    a    <span class=keyword>:</span> 'T </div><div>         <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>Create a promise (in resolved state) with supplied value.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=3 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk14>{|</span><span class=mtk1> Firstname </span><span class=mtk14>=</span><span class=mtk1> </span><span class=mtk10>"John"</span><span class=mtk1> </span><span class=mtk14>|}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.log $</span><span class=mtk10>"Hello, </span><span class=mtk14>%s</span><span class=mtk10>{user.Firstname}"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Expected output: "Hello, John"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T</div>Value to return</div><p><strong>Returns</strong><p>Returns a promise returning the supplied value<hr><div class=api-code><div><span class=keyword>val</span> <a href=#reject id=reject>reject</a> <span class=keyword>:</span></div><div>    reason <span class=keyword>:</span> exn </div><div>           <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>Creates promise (in rejected state) with supplied reason.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=4 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.reject </span><span class=mtk14>(</span><span class=mtk1>Exception </span><span class=mtk10>"User not found"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> _ </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// This promise is skipped</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.catch </span><span class=mtk14>(fun</span><span class=mtk1> error </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.error $</span><span class=mtk10>"An error ocurred: </span><span class=mtk14>%s</span><span class=mtk10>{error.Message}"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Expected output: "An error ocurred: User not found"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>reason</span> <span class=keyword>:</span> exn</div>Reason to return</div><p><strong>Returns</strong><p>Return a promise in a rejected state<hr><div class=api-code><div><span class=keyword>val</span> <a href=#bind id=bind>bind</a> <span class=keyword>:</span></div><div>    a    <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span> <span class=keyword>-></span></div><div>    pr   <span class=keyword>:</span> 'T1                </div><div>         <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T2<span class=keyword>></span></span></div></div><p>Bind a value into a promise of a new type.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=5 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk14>{|</span><span class=mtk1> Firstname </span><span class=mtk14>=</span><span class=mtk1> </span><span class=mtk10>"John"</span><span class=mtk1> </span><span class=mtk14>|}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.bind </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Do something with user and returns a promise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        resolve $</span><span class=mtk10>"Hello, </span><span class=mtk14>%s</span><span class=mtk10>{user.Firstname}"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> message </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.log message</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Expected output: "Hello, John"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span></div><p>A function that takes the value of type <code>T1</code> and transforms it into a promise of type <code>T2</code>.</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T1</div>The input promise</div><p><strong>Returns</strong><p>A promise of the output type of the binder.<hr><div class=api-code><div><span class=keyword>val</span> <a href=#map id=map>map</a> <span class=keyword>:</span></div><div>    a   <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2 <span class=keyword>-></span></div><div>    pr  <span class=keyword>:</span> 'T1        </div><div>        <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T2<span class=keyword>></span></span></div></div><p>Map a value into another type, the result will be wrapped in a promise for you.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=6 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk14>{|</span><span class=mtk1> Firstname </span><span class=mtk14>=</span><span class=mtk1> </span><span class=mtk10>"John"</span><span class=mtk1> </span><span class=mtk14>|}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    user.Firstname</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span><span class=mtk1> </span><span class="mtk7 mtki">// Returns a Promise&#60string> with the value "John"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2</div>A function to apply to the result of the input promise.</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T1</div>The input promise</div><p><strong>Returns</strong><p>A promise after applying the mapping function<hr><div class=api-code><div><span class=keyword>val</span> <a href=#iter id=iter>iter</a> <span class=keyword>:</span></div><div>    a    <span class=keyword>:</span> 'T <span class=keyword>-></span> unit <span class=keyword>-></span></div><div>    pr   <span class=keyword>:</span> 'T         </div><div>         <span class=keyword>-></span> unit</div></div><p>Call a function with the result of a promise and stop the promise chain.<p>This is equivalent to <code>Promise.map ... |> ignore</code><div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=7 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>fetchUser </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.iter </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.log </span><span class=mtk10>"User firstname is user.Firstname"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span><span class=mtk1> </span><span class="mtk7 mtki">// unit</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T <span class=keyword>-></span> unit</div>A function to apply to the result of the input promise</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><hr><div class=api-code><div><span class=keyword>val</span> <a href=#tap id=tap>tap</a> <span class=keyword>:</span></div><div>    fn  <span class=keyword>:</span> 'T <span class=keyword>-></span> unit <span class=keyword>-></span></div><div>    a   <span class=keyword>:</span> 'T         </div><div>        <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>This is an identity function, it calls the given function and return the promise value untouched.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=8 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>fetchUser </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.tap </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Do something</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.log </span><span class=mtk10>"The user has been received"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> user </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// user value is available here untouched</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fn</span> <span class=keyword>:</span> 'T <span class=keyword>-></span> unit</div>A function to call after receiving the receiving of the input promise</div><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T</div>The input promise</div><p><strong>Returns</strong><p>A promise of the same type as the input promise<hr><div class=api-code><div><span class=keyword>val</span> <a href=#catch id=catch>catch</a> <span class=keyword>:</span></div><div>    fail  <span class=keyword>:</span> exn <span class=keyword>-></span> 'T <span class=keyword>-></span></div><div>    pr    <span class=keyword>:</span> 'T        </div><div>          <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>Handle an errored promise allowing you pass a return value.<p>This version of <code>catch</code> expects a function returning just <code>'T</code>, as opposed to <code>Promise&#60'T></code>. If you need to return <code>Promise&#60'T></code>, use <code>catchBind</code>.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=9 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    reject </span><span class=mtk14>(</span><span class=mtk1>System.Exception </span><span class=mtk10>"User not found"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.catch </span><span class=mtk14>(fun</span><span class=mtk1> error </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Log the error</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    console.error error</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Do something to recover from the error</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    Error error.Message</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> 'T</div>Function to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><p><strong>Returns</strong><p>A promise which result of the call of fail<hr><div class=api-code><div><span class=keyword>val</span> <a href=#catch_bind id=catch_bind>catchBind</a> <span class=keyword>:</span></div><div>    fail      <span class=keyword>:</span> exn <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span> <span class=keyword>-></span></div><div>    pr        <span class=keyword>:</span> 'T                 </div><div>              <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></span></div></div><p>Handle an errored promise allowing to call a promise.<p>This version of <code>catch</code> expects a function returning <code>Promise&#60'T></code> as opposed to just <code>'T</code>. If you need to return just 'T, use <code>catch</code>.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=10 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    reject </span><span class=mtk14>(</span><span class=mtk1>System.Exception </span><span class=mtk10>"User not found"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.catchBind </span><span class=mtk14>(fun</span><span class=mtk1> error </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Recover from the error, here we call another promise and returns it's result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    logErrorToTheServer error</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span></div>Function to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><p><strong>Returns</strong><p>A promise which is the result of the fail function<hr><div class=api-code><div><span class=keyword>val</span> <a href=#catch_end id=catch_end>catchEnd</a> <span class=keyword>:</span></div><div>    fail     <span class=keyword>:</span> exn <span class=keyword>-></span> unit <span class=keyword>-></span></div><div>    pr       <span class=keyword>:</span> 'T          </div><div>             <span class=keyword>-></span> unit</div></div><p>Used to catch errors at the end of a promise chain.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=11 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    reject </span><span class=mtk14>(</span><span class=mtk1>System.Exception </span><span class=mtk10>"User not found"</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> _ </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> _ </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.catchEnd </span><span class=mtk14>(fun</span><span class=mtk1> error </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span><span class=mtk1> </span><span class="mtk7 mtki">// Returns unit</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> unit</div>Fuction to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><hr><div class=api-code><div><span class=keyword>val</span> <a href=#either id=either>either</a> <span class=keyword>:</span></div><div>    success <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2 <span class=keyword>-></span></div><div>    fail    <span class=keyword>:</span> exn <span class=keyword>-></span> 'T2 <span class=keyword>-></span></div><div>    pr      <span class=keyword>:</span> 'T1        </div><div>            <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T2<span class=keyword>></span></span></div></div><p>A combination of <code>map</code> and <code>catch</code>, this function applies the <code>success</code> continuation when the input promise resolves successfully, or <code>fail</code> continuation when the input promise fails.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=12 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>somePromise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.either</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> x </span><span class=mtk14>-></span><span class=mtk1> string x</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> err </span><span class=mtk14>-></span><span class=mtk1> Promise.lift err.Message</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>success</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2</div>Function to call if the input promise succeeds</div><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> 'T2</div>Function to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T1</div>The input promise</div><p><strong>Returns</strong><p>A new promise which is the result of calling <code>success</code> if <code>pr</code> succeedes, or of <code>fail</code> if <code>pr</code> failed<hr><div class=api-code><div><span class=keyword>val</span> <a href=#either_bind id=either_bind>eitherBind</a> <span class=keyword>:</span></div><div>    success    <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span> <span class=keyword>-></span></div><div>    fail       <span class=keyword>:</span> exn <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span> <span class=keyword>-></span></div><div>    pr         <span class=keyword>:</span> 'T1                </div><div>               <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span>'T2<span class=keyword>></span></span></div></div><p>A combination of <code>bind</code> and <code>catchBind</code>, this function applies the <code>success</code> continuation when the input promise resolves successfully, or <code>fail</code> continuation when the input promise fails.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=13 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>somePromise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.eitherBind</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> x </span><span class=mtk14>-></span><span class=mtk1> string x </span><span class=mtk14>|></span><span class=mtk1> Promise.lift</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> err </span><span class=mtk14>-></span><span class=mtk1> Promise.lift err.Message</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>success</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span></div>Binder function to call if the input promise succeeds</div><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span></div>Binder function to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T1</div>The input promise</div><p><strong>Returns</strong><p>A new promise which is the result of calling <code>success</code> if <code>pr</code> succeedes, or of <code>fail</code> if <code>pr</code> failed<hr><div class=api-code><div><span class=keyword>val</span> <a href=#either_end id=either_end>eitherEnd</a> <span class=keyword>:</span></div><div>    success   <span class=keyword>:</span> 'T <span class=keyword>-></span> unit  <span class=keyword>-></span></div><div>    fail      <span class=keyword>:</span> exn <span class=keyword>-></span> unit <span class=keyword>-></span></div><div>    pr        <span class=keyword>:</span> 'T          </div><div>              <span class=keyword>-></span> unit</div></div><p>Same as <code>Promise.either</code> but stopping the promise execution.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=14 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>somePromise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.eitherEnd</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> x </span><span class=mtk14>-></span><span class=mtk1> string x</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> err </span><span class=mtk14>-></span><span class=mtk1> Promise.lift err.Message</span><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>success</span> <span class=keyword>:</span> 'T <span class=keyword>-></span> unit</div>Binder function to call if the input promise succeeds</div><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> unit</div>Binder function to call if the input promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><hr><div class=api-code><div><span class=keyword>val</span> <a href=#start id=start>start</a> <span class=keyword>:</span></div><div>    pr    <span class=keyword>:</span> 'T </div><div>          <span class=keyword>-></span> unit</div></div><p>Start a promise.<p>Fake starting a promise. It is faking it because promise are hot meaning they execute directly after their creation.<p><code>Promise.start</code> is equivalent to <code>promise |> ignore</code><div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=15 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>myPromise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.start</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><hr><div class=api-code><div><span class=keyword>val</span> <a href=#try_start id=try_start>tryStart</a> <span class=keyword>:</span></div><div>    fail     <span class=keyword>:</span> exn <span class=keyword>-></span> unit <span class=keyword>-></span></div><div>    pr       <span class=keyword>:</span> 'T          </div><div>             <span class=keyword>-></span> unit</div></div><p>Same as <code>Promise.start</code> but forcing you to handle the rejected state.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=16 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>myPromise</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.tryStart</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>(fun</span><span class=mtk1> error </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Do something on error</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fail</span> <span class=keyword>:</span> exn <span class=keyword>-></span> unit</div>Function to apply if the promise fail</div><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> 'T</div>The input promise</div><hr><div class=api-code><div><span class=keyword>val</span> <a href=#parallel id=parallel>Parallel</a> <span class=keyword>:</span></div><div>    pr       <span class=keyword>:</span> <a href="fable-core-js-promise&#96;1.html">Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span> </div><div>             <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span>'T[]</span><span class=keyword>></span></span></div></div><p>Takes a sequence of promises as an input, and returns a single <code>Promise</code> that resolves to an array of the results of the input promises.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=17 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p1</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>100</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>1</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p2</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>200</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>2</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p3</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>300</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>3</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.Parallel </span><span class=mtk14>[</span><span class=mtk1>p1</span><span class=mtk14>;</span><span class=mtk1> p2</span><span class=mtk14>;</span><span class=mtk1> p3</span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> res </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// res = [|1; 2; 3 |]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> <a href="fable-core-js-promise&#96;1.html">Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></div>A list of promise to wait for</div><p><strong>Returns</strong><p>Return a new promise returning an array containing all the promise result<hr><div class=api-code><div><span class=keyword>val</span> <a href=#all id=all>all</a> <span class=keyword>:</span></div><div>    pr  <span class=keyword>:</span> <a href="fable-core-js-promise&#96;1.html">Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span> </div><div>        <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span>'T[]</span><span class=keyword>></span></span></div></div><p>Takes a sequence of promises as an input, and returns a single <code>Promise</code> that resolves to an array of the results of the input promises.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=18 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p1</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>100</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>1</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p2</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>200</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>2</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>p3</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>do!</span><span class=mtk1> Promise.sleep </span><span class=mtk6>300</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> </span><span class=mtk6>3</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.all </span><span class=mtk14>[</span><span class=mtk1>p1</span><span class=mtk14>;</span><span class=mtk1> p2</span><span class=mtk14>;</span><span class=mtk1> p3</span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> res </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// res = [|1; 2; 3 |]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>..</span><span class=mtk1>.</span></span></span></code></pre></div><p>Note: If you need to return mixed types you can use boxing and unboxing<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=19 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>users</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let!</span><span class=mtk1> </span><span class=mtk5>users</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> fetchUsers </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> box users</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>posts</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>promise {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>let!</span><span class=mtk1> </span><span class=mtk5>posts</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> fetchPosts </span><span class=mtk6>()</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>return</span><span class=mtk1> box posts</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.all </span><span class=mtk14>[</span><span class=mtk1>p1</span><span class=mtk14>;</span><span class=mtk1> p2</span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> res </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>users</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> unbox</span><span class=mtk14>&lt;</span><span class=mtk1>User list</span><span class=mtk14>></span><span class=mtk1> res.</span><span class=mtk14>[</span><span class=mtk6>0</span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>posts</span><span class=mtk1> </span><span class=mtk14>=</span><span class=mtk1> unbox</span><span class=mtk14>&lt;</span><span class=mtk1>Post list</span><span class=mtk14>></span><span class=mtk1> res.</span><span class=mtk14>[</span><span class=mtk6>1</span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>pr</span> <span class=keyword>:</span> <a href="fable-core-js-promise&#96;1.html">Promise</a><span class=keyword>&lt;</span>'T<span class=keyword>></span></div>A list of promise to wait for</div><p><strong>Returns</strong><p>Return a new promise returning an array containing all the promise result<hr><div class=api-code><div><span class=keyword>val</span> <a href=#result id=result>result</a> <span class=keyword>:</span></div><div>    a      <span class=keyword>:</span> 'T </div><div>           <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span><a href=https://fsharp.github.io/fsharp-core-docs/reference/fsharp-core-fsharpresult-2>Result</a><span class=keyword>&lt;</span><span>'T<span class=keyword>,</span> exn</span><span class=keyword>></span></span><span class=keyword>></span></span></div></div><p>Map the <code>Promise</code> result into a <code>Result</code> type.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=20 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk6>42</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// value = Ok 42</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Fail example</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.reject </span><span class=mtk10>"Invalid value"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// value = Error "Invalid value"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> 'T</div>The input promise</div><p><strong>Returns</strong><p>A promise returning <code>Ok</code> if the input promise succeed, <code>Error</code> if the input promise failed<hr><div class=api-code><div><span class=keyword>val</span> <a href=#map_result id=map_result>mapResult</a> <span class=keyword>:</span></div><div>    fn        <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2      <span class=keyword>-></span></div><div>    a         <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T1 <span class=keyword>,</span>'E<span class=keyword>></span> </div><div>              <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span><a href=https://fsharp.github.io/fsharp-core-docs/reference/fsharp-core-fsharpresult-2>Result</a><span class=keyword>&lt;</span><span>'T2<span class=keyword>,</span> 'E</span><span class=keyword>></span></span><span class=keyword>></span></span></div></div><p>Evaluates to <code>myPromise |> Promise.map (Result.map fn)</code><div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=21 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk6>42</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.mapResult </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    value </span><span class=mtk14>+</span><span class=mtk1> </span><span class=mtk6>10</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// value = Ok 52</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fn</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> 'T2</div>The mapping function</div><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T1 <span class=keyword>,</span>'E<span class=keyword>></span></div>The input promise</div><p><strong>Returns</strong><p>A promise returning the result of applying the mapping function to the input promise result<hr><div class=api-code><div><span class=keyword>val</span> <a href=#bind_result id=bind_result>bindResult</a> <span class=keyword>:</span></div><div>    fn         <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span> <span class=keyword>-></span></div><div>    a          <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T1 <span class=keyword>,</span>'E<span class=keyword>></span>    </div><div>               <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span><a href=https://fsharp.github.io/fsharp-core-docs/reference/fsharp-core-fsharpresult-2>Result</a><span class=keyword>&lt;</span><span>'T2<span class=keyword>,</span> 'E</span><span class=keyword>></span></span><span class=keyword>></span></span></div></div><p>Transform the success part of a result promise into another promise.<div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=22 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>multiplyBy2</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>value </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>int</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    Promise.create </span><span class=mtk14>(fun</span><span class=mtk1> resolve reject </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        resolve </span><span class=mtk14>(</span><span class=mtk1>value </span><span class=mtk14>*</span><span class=mtk1> </span><span class=mtk6>2</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.lift </span><span class=mtk6>42</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.bindResult </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    multiplyBy2 value</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// value = Ok 84</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fn</span> <span class=keyword>:</span> 'T1 <span class=keyword>-></span> Promise<span class=keyword>&lt;</span>'T<span class=keyword>></span></div>The binder function</div><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T1 <span class=keyword>,</span>'E<span class=keyword>></span></div>The input promise</div><p><strong>Returns</strong><p>Returns a new promise applying to the binder function to it if the input promise succeed<hr><div class=api-code><div><span class=keyword>val</span> <a href=#map_result_error id=map_result_error>mapResultError</a> <span class=keyword>:</span></div><div>    fn             <span class=keyword>:</span> 'E1 <span class=keyword>-></span> 'E2      <span class=keyword>-></span></div><div>    a              <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T <span class=keyword>,</span>'E1<span class=keyword>></span> </div><div>                   <span class=keyword>-></span> <span><a href=https://docs.microsoft.com/dotnet/api/fable.core.js.promise-1>Promise</a><span class=keyword>&lt;</span><span><a href=https://fsharp.github.io/fsharp-core-docs/reference/fsharp-core-fsharpresult-2>Result</a><span class=keyword>&lt;</span><span>'T<span class=keyword>,</span> 'E2</span><span class=keyword>></span></span><span class=keyword>></span></span></div></div><p>Evaluates to <code>myPromise |> Promise.map (Result.map fn)</code><div class=docs-example><p><strong>Example</strong><pre class="atom-one-light grvsc-container"data-index=23 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>Promise.reject </span><span class=mtk14>-</span><span class=mtk6>1</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.result</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.mapResultError </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    $</span><span class=mtk10>"</span><span class=mtk14>%s</span><span class=mtk10>{value} is not a valid value"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Promise.map </span><span class=mtk14>(fun</span><span class=mtk1> value </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// value = Error "-1 is not a valid value"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>)</span></span></span></code></pre></div><p><strong>Parameters</strong><div class=doc-parameter><div class=api-code><span class=property>fn</span> <span class=keyword>:</span> 'E1 <span class=keyword>-></span> 'E2</div>A mapper function</div><div class=doc-parameter><div class=api-code><span class=property>a</span> <span class=keyword>:</span> <a href="microsoft-fsharp-core-fsharpresult&#96;2.html">Result</a><span class=keyword>&lt;</span>'T <span class=keyword>,</span>'E1<span class=keyword>></span></div>The input promise</div><p><strong>Returns</strong><p>A promise returning the result of applying the mapper function to the input promise in case of error, otherwise the result of the input promise as it is<hr></div></section></div></div></div></div><script async="" src="/fable-promise/resources/nacara-standard-layouts/scripts/menu.js"></script></body></html>